<!DOCTYPE html>
<!-- saved from url=(0058)http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3 -->
<html lang="en" class="perfect-scrollbar-on"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <link rel="apple-touch-icon" sizes="76x76" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/templates/now-ui-dashboard/img/apple-icon.png">
  <link rel="icon" type="image/png" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/templates/now-ui-dashboard/img/favicon.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ระบบคลังโรงพยาบาลบาเจาะ</title>
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no" name="viewport">
  <!--     Fonts and icons     -->
  <!-- <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" /> -->
  <link rel="stylesheet" href="./ระบบคลังโรงพยาบาลบาเจาะ_files/all.css">
  <link rel="stylesheet" type="text/css" href="./ระบบคลังโรงพยาบาลบาเจาะ_files/bootstrap.min.css">
  <!-- CSS Files -->
  <!-- <link href="http://localhost/dropbox/SYSTEMS/STOCKS/public/templates/now-ui-dashboard/css/bootstrap.min.css" rel="stylesheet" /> -->
  <link rel="stylesheet" type="text/css" href="./ระบบคลังโรงพยาบาลบาเจาะ_files/now-ui-dashboard.min.css">

<!--   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/css/select2.min.css" integrity="sha256-FdatTf20PQr/rWg+cAKfl6j4/IY3oohFAJ7gVC3M34E=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.min.js" integrity="sha256-d/edyIFneUo3SvmaFnf96hRcVBcyaOy96iMkPez1kaU=" crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css?family=Taviraj&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/plugins/autocomplete/easy-autocomplete.min.css"> 
  <script src="http://localhost/dropbox/SYSTEMS/STOCKS/public/plugins/autocomplete/jquery.easy-autocomplete.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  
  <style type="text/css">
      h1, h2, h3, h4, h5, h6, body, button, input, select, option, textarea, ::placeholder{
          font-family: 'Taviraj', serif;
      }
      p, span, button, label, input, select,option, textarea, ::placeholder{
        font-size: 1.1em;
      }
      .nav{font-size: 1.2em;}
      .pull-left{float:left!important; margin-left: -50px}
      .img-circle{border-radius:50%}

      .table>thead>tr>th { font-size: 1.2em; }
  </style> -->
</head>

<body class="sidebar-mini ">
  <div class="wrapper ">
    <div class="main-panel ps ps--active-y" id="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent  bg-primary  navbar-absolute">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-toggle">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
            <!-- <h4>STOCKS SYSTEM</h4> -->
            <!-- <h3 class="navbar-brand">STOCKS SYSTEM :: ระบบคลังโรงพยาบาลบาเจาะ</h3> -->
            <h5>STOCKS SYSTEM :: ระบบคลังโรงพยาบาลบาเจาะ <br> <span style="font-size: 18px">คลังวัสดุวิทยาศาสตร์</span></h5>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end" id="navigation">
            <form>
              <div class="input-group no-border">
                <input type="text" value="" class="form-control" placeholder="Search...">
                <div class="input-group-append">
                  <div class="input-group-text">
                    <i class="now-ui-icons ui-1_zoom-bold"></i>
                  </div>
                </div>
              </div>
            </form>
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#pablo">
                  <i class="now-ui-icons media-2_sound-wave"></i>
                  <p>
                    <span class="d-lg-none d-md-block">Stats</span>
                  </p>
                </a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <!-- <span class="now-ui-icons badge badge-danger">1</span> -->
                  
                  <i class="now-ui-icons ui-1_email-85"></i>
                  <p>
                    <span class="d-lg-none d-md-block">Some Actions</span>
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#">Action</a>
                  <a class="dropdown-item" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#">Another action</a>
                  <a class="dropdown-item" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#">Something else here</a>
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#pablo">
                  <i class="now-ui-icons users_single-02"></i>
                  <p>
                    <span class="d-lg-none d-md-block">Account</span>
                  </p>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->
      <div class="panel-header panel-header-sm">
      </div>    <div class="sidebar" data-color="red">
      <!--
        Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red | yellow"
    -->
      <div class="logo">
        <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public" class="simple-text logo-mini">
          SS
        </a>
        <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public" class="simple-text logo-normal">
          STOCKS SYSTEM
        </a>
        <div class="navbar-minimize">
          <button id="minimizeSidebar" class="btn btn-outline-white btn-icon btn-round">
              <i class="now-ui-icons text_align-center visible-on-sidebar-regular"></i>
              <i class="now-ui-icons design_bullet-list-67 visible-on-sidebar-mini"></i>
          </button>
        </div>
      </div>
      <div class="sidebar-wrapper ps" id="sidebar-wrapper">
        <ul class="nav">
                    <li class="active">
            <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3">
                <i class="now-ui-icons design_app"></i>
              <p>Dashboard</p>
            </a>
          </li>
          <li class="nav-item ">

            <a class="nav-link" data-toggle="collapse" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#UserMenu">
              <i class="now-ui-icons users_single-02"></i>
              <p> ผู้ใช้ทั่วไป
                <b class="caret"></b>
              </p>
            </a>
            <div class="collapse" id="UserMenu">
              <ul class="nav">
                <li class="nav-item ">
                 <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public/order/3">
                  <i class="now-ui-icons users_single-02"></i>
                  <p>ORDER</p>
                </a>
                </li>
                <li class="nav-item ">
                  <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public/order/history/3">
                    <i class="now-ui-icons users_single-02"></i>
                    <p>ORDER HISTORY</p>
                  </a>
                </li>
              </ul>
            </div>
          </li>
          <li class="nav-item ">

            <a class="nav-link" data-toggle="collapse" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#ReportMenu">
              <i class="now-ui-icons business_chart-bar-32"></i>
              <p> รายงาน
                <b class="caret"></b>
              </p>
            </a>
            <div class="collapse" id="ReportMenu">
              <ul class="nav">
                <li class="nav-item ">
                 <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public/reports/month/3">
                  <i class="now-ui-icons business_chart-bar-32"></i>
                  <p>รายงานประจำเดือน</p>
                </a>
                </li>
                <li class="nav-item ">
                  <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public/reports/year/3">
                    <i class="now-ui-icons business_chart-bar-32"></i>
                    <p>รายงานประจำปี</p>
                  </a>
                </li>
              </ul>
            </div>
          </li>
                    <li class="nav-item ">
            <a class="nav-link" data-toggle="collapse" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#StockMenu">
              <i class="now-ui-icons shopping_shop"></i>
              <p> ระบบสต๊อก
                <b class="caret"></b>
              </p>
            </a>
            <div class="collapse" id="StockMenu">
              <ul class="nav">
                <li class="nav-item ">
                 <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public/stock/3">
                  <i class="now-ui-icons shopping_shop"></i>
                  <p>วัสดุคงคลัง</p>
                </a>
                </li>
                <li class="nav-item ">
                  <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public/stock/add/3">
                    <i class="now-ui-icons shopping_shop"></i>
                    <p>รับวัสดุเข้าคลัง</p>
                  </a>
                </li>
              </ul>
            </div>
          </li>
          
            <li class="nav-item ">
                        <a class="nav-link" data-toggle="collapse" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#RevisionMenu">
                          <i class="now-ui-icons loader_refresh"></i>
                          <p> บันทึกข้อมูลย้อนหลัง
                            <b class="caret"></b>
                          </p>
                        </a>
                    <div class="collapse" id="RevisionMenu">
                      <ul class="nav">
                        <li class="nav-item ">
                          <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public/stock/retroact/3">
                            <i class="now-ui-icons loader_refresh"></i>
                            <p>รับวัสดุคงคลัง(ย้อนหลัง)</p>
                          </a>
                        </li>
                        <li class="nav-item ">
                          <a href="http://localhost/dropbox/SYSTEMS/STOCKS/public/stock/redispense/3">
                            <i class="now-ui-icons loader_refresh"></i>
                            <p>จ่ายวัสดุ (ย้อนหลัง)</p>
                          </a>
                        </li></ul></div></li>              

          <li class="nav-item ">
            <a class="nav-link" data-toggle="collapse" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#AdminMenu">
              <i class="now-ui-icons loader_gear"></i>
              <p> ผู้ดูแลระบบ
                <b class="caret"></b>
              </p>
            </a>
            <div class="collapse" id="AdminMenu">
              <ul class="nav">
                <li class="nav-item ">
                  <a class="nav-link" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/setting/3">
                    <i class="now-ui-icons loader_gear"></i>
                    <p>System Setting</p>
                  </a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dispense/3">
                    <i class="now-ui-icons loader_gear"></i>
                    <p>จ่ายวัสดุไม่มีใบเบิก</p>
                  </a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dispenseorder/3">
                    <i class="now-ui-icons loader_gear"></i>
                    <p>จ่ายวัสดุมีใบเบิก</p>
                  </a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/item/3">
                    <i class="now-ui-icons loader_gear"></i>
                    <p>รายการวัสดุ</p>
                  </a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/unit/3">
                    <i class="now-ui-icons loader_gear"></i>
                    <p>รายการหน่วยนับ</p>
                  </a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/company/3">
                    <i class="now-ui-icons loader_gear"></i>
                    <p>บริษัท</p>
                  </a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/user/3">
                    <i class="now-ui-icons loader_gear"></i>
                    <p>ผู้ใช้</p>
                  </a>
                </li>
              </ul>
            </div>
          </li>
        
        </ul>
      <div class="ps__rail-x" style="left: 0px; bottom: 0px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 0px; right: 0px;"><div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 0px;"></div></div></div>
    </div><input type="hidden" id="stockId" value="3">
<div class="content">
  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">เบิก-จ่ายล่าสุด - <small class="description">Latest Transaction</small></h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead class=" text-primary">
                <tr><th>รหัส</th>
                <th>วันที่</th>
                <th>ประเภทการเบิก</th>
                <th>ผู้เบิก</th>
                <th>หน่วยงาน</th>
                <th>ผู้จ่าย</th>
                <th class="text-right">จัดการ</th>
              </tr></thead>
              <tbody>
                              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card ">
        <div class="card-header ">
          <h5 class="card-title">รายชื่อผู้ใช้ระบบ - <small class="description">System Users</small></h5>
        </div>
        <div class="card-body ">
          <ul class="nav nav-pills nav-pills-danger" role="tablist">
            <li class="nav-item">
              <a class="nav-link " data-toggle="tab" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#link1" role="tablist">
                Request Users
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" data-toggle="tab" href="http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/3#link2" role="tablist">
                Active Users
              </a>
            </li>
          </ul>
          <div class="tab-content tab-space">
            <div class="tab-pane " id="link1">
              <!-- <div class="table-responsive"> -->
                <table class="table" id="data-request-users">
                  <thead class=" text-primary">
                    <tr><th>ลำดับ</th>
                    <th>ชื่อ-สกุล</th>
                    <th>Action</th>
                  </tr></thead>
                  <tbody>
                                      </tbody>
                </table>
              <!-- </div> -->
            </div>
            <div class="tab-pane active" id="link2">
              <div class="table-responsive">
                <table class="table" id="data-active-users">
                  <thead class=" text-primary">
                    <tr><th>วันที่</th>
                    <th>ชื่อ-สกุล</th>
                    <th>ประเภทบัญชี</th>
                  </tr></thead>
                  <tbody>
                                        <tr>
                      <td>1</td>
                      <td>นายมาฮีดีน จอแม</td>
                      <td>Super Administrator</td>
                    </tr>
                                        <tr>
                      <td>2</td>
                      <td>น.ส.สาปีนะห์ นิยากะ</td>
                      <td>Administrator</td>
                    </tr>
                                      </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">รายการวัสดุคงคลัง ประจำวันที่ 27 เดือน  พ.ศ. 2562 - <small class="description">Current Stock</small></h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead class=" text-primary">
                <tr><th>ที่</th>
                <th>รหัสวัสดุ</th>
                <th>ชื่อวัสดุ</th>
                <th>จำนวนวัสดุคงคลัง</th>
                <th class="text-right">หมายเหตุ</th>
              </tr></thead>
              <tbody>
                              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">รายการวัสดุคงคลังเหลือน้อย - <small class="description">Warning Stock Quantity</small></h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead class=" text-primary">
                <tr><th>ที่</th>
                <th>ชื่อวัสดุ</th>
                <th>จำนวนวัสดุคงคลัง</th>
              </tr></thead>
              <tbody>
                              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

   <!-- modal transaction records -->
  <div class="modal fade" id="transactionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header justify-content-center">
          <h5 class="title title-up">ระบบคลังโรงพยาบาลบาเจาะ</h5>
        </div>
        <div class="modal-body">
          <div class="typography-line">
              <span>ID</span>
              <span class="text-danger" id="transactionId" style="margin-left: 120px"></span>
          </div>
          <div class="row">
            <label class="col-md-2 col-form-label">ชื่อผู้ขอเบิก</label>
            <div class="col-md-4">
              <div class="form-group">
                <input type="text" class="form-control select" id="requestBy">
              </div>
            </div>
            <label class="col-md-2 col-form-label">วันที่ขอเบิก</label>
            <div class="col-md-4">
              <div class="form-group">
                <input type="text" class="form-control select" id="transactionDateTime">
              </div>
            </div>
          </div>
          <div class="row">
           <label class="col-md-2 col-form-label">ชื่อผู้จ่าย</label>
            <div class="col-md-4">
              <div class="form-group">
                <input type="text" class="form-control select" id="deliveryBy">
              </div>
            </div>
            <label class="col-md-2 col-form-label">วันที่จ่าย</label>
            <div class="col-md-4">
              <div class="form-group">
                <input type="text" class="form-control select" id="deliveryDateTime">
              </div>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table" id="data-list">
              <thead class=" text-primary">
                <tr><th>ที่</th>
                <th>รหัสวัสดุ</th>
                <th>ชื่อพัสุด</th>
                <th>จำนวนขอเบิก</th>
                <th>จำนวนจ่าย</th>
              </tr></thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" id="btn-cancel" data-dismiss="modal">ปิด</button>
        </div>
      </div>
    </div>
  </div>
<script type="text/javascript">
  function getTransactionItems(transactionId) {
    // console.log(transactionId)
    $('#transactionModal').modal('show');

    $.ajax({
      type:'POST',
      url: 'http://localhost/dropbox/SYSTEMS/STOCKS/public/dashboard/modal/'+transactionId,
      cache:false,
      success:function(data){
        let response = JSON.parse(data)
        console.log(response)
        let transactionId       = response.transactionInfo.transactionId
        let transactionDateTime = response.transactionInfo.transactionDateTime
        let requestBy           = response.transactionInfo.requestBy
        let deliveryDateTime    = response.transactionInfo.deliveryDateTime
        let deliveryBy          = response.transactionInfo.deliveryBy


        $("#transactionId").text(transactionId)
        $("#requestBy").val(requestBy)
        $("#transactionDateTime").val(transactionDateTime)
        $("#deliveryBy").val(deliveryBy)
        $("#deliveryDateTime").val(deliveryDateTime)
        $("input").prop('disabled',true)

        $('#data-list tbody').empty();
          let i = 1

        response.transactionItemsInfo.forEach(function(element) {
          let itemCode        = element.itemCode;
          let itemName        = element.itemName;
          let requestQuantity = element.requestQuantity;
          let deliverQuantity = element.deliverQuantity;

          $('#data-list tbody:last-child').append('<tr>\
              <td>'+i+'</td>\
              <td>'+itemCode+'</td>\
              <td>'+itemName+'</td>\
              <td>'+requestQuantity+'</td>\
              <td>'+deliverQuantity+'</td>\
            </tr>');
          i++

        })
      }
    })
  }

  function approveRequest(requestUserId) {

    let stockId = $("#stockId").val()
    
    $.ajax({
      type: 'POST',
      url: 'http://localhost/dropbox/SYSTEMS/STOCKS/public/auth/approve/'+requestUserId,
      data:{ stockId:stockId},
      cache:false,
      success:function(data){
        // console.log(html)
        let response = JSON.parse(data)
        console.log(response)

        if (response.success == true) {
          swal("Good job!", response.message, "success");
        }
        else{
          swal("ERROR!", response.message, "error");
        }

        $('#data-request-users tbody, #data-active-users tbody').empty();
        response.requestUsersInfo.forEach(function(element) {
          let requestDate     = element.requestDate;
          let userFullName    = element.userFullName;
          let userTypeName    = element.userTypeName;
          let userId          = element.userId;

          $('#data-request-users tbody:last-child').append('<tr>\
              <td>'+requestDate+'</td>\
              <td>'+userFullName+'</td>\
              <td>\
                <div class="dropdown">\
                    <button type="button" class="btn btn-sm btn-danger dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\
                      จัดการ\
                    </button>\
                  <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 38px, 0px); top: 0px; left: 0px; will-change: transform;">\
                    <a class="dropdown-item" href="#" onclick="approveRequest('+userId+')">อนุมัติ</a>\
                    <a class="dropdown-item" href="#" onclick="rejectRequest('+userId+')">ไม่อนุมัติ</a>\
                  </div>\
                </div>\
              </td>\
            </tr>');

        })
        
        let i = 1
        response.activeUsersInfo.forEach(function(element) {

          let userFullName    = element.userFullName;
          let userTypeName    = element.userTypeName;

          $('#data-active-users tbody:last-child').append('<tr>\
              <td>'+i+'</td>\
              <td>'+userFullName+'</td>\
              <td>'+userTypeName+'</td>\
            </tr>');
        i++

        })

      }
    })
  }

  function rejectRequest(requestUserId) {

    let stockId = $("#stockId").val()
    
    $.ajax({
      type: 'POST',
      url: 'http://localhost/dropbox/SYSTEMS/STOCKS/public/auth/reject/'+requestUserId,
      data:{ stockId:stockId},
      cache:false,
      success:function(data){
        // console.log(html)
        let response = JSON.parse(data)
        console.log(response)

        if (response.success == true) {
          swal("Good job!", response.message, "success");
        }
        else{
          swal("ERROR!", response.message, "error");
        }

        $('#data-request-users tbody, #data-active-users tbody').empty();
        response.requestUsersInfo.forEach(function(element) {
          let requestDate     = element.requestDate;
          let userFullName    = element.userFullName;
          let userTypeName    = element.userTypeName;
          let userId          = element.userId;

          $('#data-request-users tbody:last-child').append('<tr>\
              <td>'+requestDate+'</td>\
              <td>'+userFullName+'</td>\
              <td>\
                <div class="dropdown">\
                    <button type="button" class="btn btn-sm btn-danger dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\
                      จัดการ\
                    </button>\
                  <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 38px, 0px); top: 0px; left: 0px; will-change: transform;">\
                    <a class="dropdown-item" href="#" onclick="approveRequest('+userId+')">อนุมัติ</a>\
                    <a class="dropdown-item" href="#" onclick="rejectRequest('+userId+')">ไม่อนุมัติ</a>\
                  </div>\
                </div>\
              </td>\
            </tr>');

        })
        
        let i = 1
        response.activeUsersInfo.forEach(function(element) {

          let userFullName    = element.userFullName;
          let userTypeName    = element.userTypeName;

          $('#data-active-users tbody:last-child').append('<tr>\
              <td>'+i+'</td>\
              <td>'+userFullName+'</td>\
              <td>'+userTypeName+'</td>\
            </tr>');
        i++

        })

      }
    })
  }
</script>      <footer class="footer">

        <div class=" container-fluid ">
          <nav>
            <ul>
              <li>
                <a href="https://portal.bachohospital.com/">
                  PORTAL
                </a>
              </li>
              <li>
                <a href="https://stock.bachohospital.com/">
                 STOCK
               </a>
             </li>
            </ul>
          </nav>
          <div class="copyright" id="copyright">
            © <script>document.getElementById('copyright').appendChild(document.createTextNode(new Date().getFullYear()))</script>2019, Designed by <a href="https://www.invisionapp.com/" target="_blank">Invision</a>. พัฒนาโดย งานข้อมูลและสารสนเทศ <a href="https://www.bachohospital.com/" target="_blank">โรงพยาบาลบาเจาะ</a>.
          </div>
        </div>
      </footer>
    <div class="ps__rail-x" style="left: 0px; bottom: 0px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 0px; height: 851px; right: 0px;"><div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 536px;"></div></div></div>
  </div>
 
  <script type="text/javascript">
    // $(document).ready(function() {
    //     $('select2').select2();
    // });
  </script>
  <!--   Core JS Files   -->
  <script src="./ระบบคลังโรงพยาบาลบาเจาะ_files/jquery.min.js.download"></script>
  <script src="./ระบบคลังโรงพยาบาลบาเจาะ_files/popper.min.js.download"></script>
  <script src="./ระบบคลังโรงพยาบาลบาเจาะ_files/bootstrap.min.js.download"></script>
  <script src="./ระบบคลังโรงพยาบาลบาเจาะ_files/perfect-scrollbar.jquery.min.js.download"></script>
  <!--  Google Maps Plugin    -->
  <!-- <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script> -->
  <!-- Chart JS -->
  <!-- <script src="http://localhost/dropbox/SYSTEMS/STOCKS/public/templates/now-ui-dashboard/js/plugins/chartjs.min.js"></script> -->
  <!--  Notifications Plugin    -->
  <!-- <script src="http://localhost/dropbox/SYSTEMS/STOCKS/public/templates/now-ui-dashboard/js/plugins/bootstrap-notify.js"></script> -->
  <!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
  <!-- <script src="http://localhost/dropbox/SYSTEMS/STOCKS/public/templates/now-ui-dashboard/js/plugins/jquery.dataTables.min.js"></script> -->
  <!-- Forms Validations Plugin -->
  <!-- <script src="http://localhost/dropbox/SYSTEMS/STOCKS/public/templates/now-ui-dashboard/js/plugins/jquery.validate.min.js"></script> -->
  <!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
  <!-- <script src="http://localhost/dropbox/SYSTEMS/STOCKS/public/templates/now-ui-dashboard/js/now-ui-dashboard.min.js?v=1.3.0" type="text/javascript"></script> -->
  <script type="text/javascript" src="./ระบบคลังโรงพยาบาลบาเจาะ_files/now-ui-dashboard.min.js.download"></script>
  <!-- Date Picker -->
  <!-- <script src="http://localhost/dropbox/SYSTEMS/STOCKS/public/plugins/datepicker/datepicker.min.js" type="text/javascript"></script> -->
  <!-- <script src="http://localhost/dropbox/SYSTEMS/STOCKS/public/js/bootstrap-selectpicker.js" type="text/javascript"></script> -->
  <!-- <script src="http://localhost/dropbox/SYSTEMS/STOCKS/public/js/bootstrap-switch.js" type="text/javascript"></script> -->

  <!-- <script src="https://demos.creative-tim.com/argon-dashboard-pro/assets/vendor/select2/dist/js/select2.min.js"></script> -->
  <!-- Now Ui Dashboard DEMO methods, don't include it in your project! -->
  <!-- <script src="../assets/demo/demo.js"></script> -->
  <script>
    $(document).ready(function(){
      $().ready(function(){
          $sidebar = $('.sidebar');
          $sidebar_img_container = $sidebar.find('.sidebar-background');

          $full_page = $('.full-page');

          $sidebar_responsive = $('body > .navbar-collapse');
          sidebar_mini_active = true;

          window_width = $(window).width();

          fixed_plugin_open = $('.sidebar .sidebar-wrapper .nav li.active a p').html();

          // if( window_width > 767 && fixed_plugin_open == 'Dashboard' ){
          //     if($('.fixed-plugin .dropdown').hasClass('show-dropdown')){
          //         $('.fixed-plugin .dropdown').addClass('show');
          //     }
          //
          // }

          $('.fixed-plugin a').click(function(event){
            // Alex if we click on switch, stop propagation of the event, so the dropdown will not be hide, otherwise we set the  section active
              if($(this).hasClass('switch-trigger')){
                  if(event.stopPropagation){
                      event.stopPropagation();
                  }
                  else if(window.event){
                     window.event.cancelBubble = true;
                  }
              }
          });

          $('.fixed-plugin .background-color span').click(function(){
              $(this).siblings().removeClass('active');
              $(this).addClass('active');

              var new_color = $(this).data('color');

              if($sidebar.length != 0){
                  $sidebar.attr('data-color',new_color);
              }

              if($full_page.length != 0){
                  $full_page.attr('filter-color',new_color);
              }

              if($sidebar_responsive.length != 0){
                  $sidebar_responsive.attr('data-color',new_color);
              }
          });

          $('.fixed-plugin .img-holder').click(function(){
              $full_page_background = $('.full-page-background');

              $(this).parent('li').siblings().removeClass('active');
              $(this).parent('li').addClass('active');


              var new_image = $(this).find("img").attr('src');

              if( $sidebar_img_container.length !=0 && $('.switch-sidebar-image input:checked').length != 0 ){
                  $sidebar_img_container.fadeOut('fast', function(){
                     $sidebar_img_container.css('background-image','url("' + new_image + '")');
                     $sidebar_img_container.fadeIn('fast');
                  });
              }

              if($full_page_background.length != 0 && $('.switch-sidebar-image input:checked').length != 0 ) {
                  var new_image_full_page = $('.fixed-plugin li.active .img-holder').find('img').data('src');

                  $full_page_background.fadeOut('fast', function(){
                     $full_page_background.css('background-image','url("' + new_image_full_page + '")');
                     $full_page_background.fadeIn('fast');
                  });
              }

              if( $('.switch-sidebar-image input:checked').length == 0 ){
                  var new_image = $('.fixed-plugin li.active .img-holder').find("img").attr('src');
                  var new_image_full_page = $('.fixed-plugin li.active .img-holder').find('img').data('src');

                  $sidebar_img_container.css('background-image','url("' + new_image + '")');
                  $full_page_background.css('background-image','url("' + new_image_full_page + '")');
              }

              if($sidebar_responsive.length != 0){
                  $sidebar_responsive.css('background-image','url("' + new_image + '")');
              }
          });

          $('.switch-sidebar-image input').on("switchChange.bootstrapSwitch", function(){
              $full_page_background = $('.full-page-background');

              $input = $(this);

              if($input.is(':checked')){
                  if($sidebar_img_container.length != 0){
                      $sidebar_img_container.fadeIn('fast');
                      $sidebar.attr('data-image','#');
                  }

                  if($full_page_background.length != 0){
                      $full_page_background.fadeIn('fast');
                      $full_page.attr('data-image','#');
                  }

                  background_image = true;
              } else {
                  if($sidebar_img_container.length != 0){
                      $sidebar.removeAttr('data-image');
                      $sidebar_img_container.fadeOut('fast');
                  }

                  if($full_page_background.length != 0){
                      $full_page.removeAttr('data-image','#');
                      $full_page_background.fadeOut('fast');
                  }

                  background_image = false;
              }
          });

          $('.switch-sidebar-mini input').on("switchChange.bootstrapSwitch", function(){
            var $btn = $(this);

            if(sidebar_mini_active == true){
                $('body').removeClass('sidebar-mini');
                sidebar_mini_active = false;
                nowuiDashboard.showSidebarMessage('Sidebar mini deactivated...');
            }else{
                $('body').addClass('sidebar-mini');
                sidebar_mini_active = true;
                nowuiDashboard.showSidebarMessage('Sidebar mini activated...');
            }

            // we simulate the window Resize so the charts will get updated in realtime.
            var simulateWindowResize = setInterval(function(){
                window.dispatchEvent(new Event('resize'));
            },180);

            // we stop the simulation of Window Resize after the animations are completed
            setTimeout(function(){
                clearInterval(simulateWindowResize);
            },1000);
          });
      });
    });
  </script>



</body></html>